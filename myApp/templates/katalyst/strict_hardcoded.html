<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>KATALYST ‚Äî AI Boosted CRM</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>
  

  <style>
    /* Background orbs + deep navy gradient */
    body{
      background:
        radial-gradient(1200px 420px at 10% -10%, rgba(56,189,248,.28), transparent 60%),
        radial-gradient(900px 380px at 92% -6%, rgba(168,85,247,.22), transparent 60%),
        linear-gradient(180deg,#0a0f25 0%,#0a0f25 60%,#0b1027 100%);
    }

    /* Card and glow */
    .k-card{
      box-shadow: 0 12px 28px rgba(0,0,0,.55), inset 0 0 0 1px rgba(255,255,255,.06);
    }

    /* Filled green CTA button (kept in case you use it elsewhere) */
    .k-btn{
      font-size: 11px; font-weight: 800; letter-spacing:.04em;
      padding:.5rem 1.25rem; border-radius:.5rem; color:#0b0f1a;
      background: linear-gradient(90deg,#34d399 0%,#a3e635 100%);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.06), 0 8px 22px rgba(16,185,129,.35);
    }

    /* Gold outline pill (card buttons) */
    .k-btn-outline-gold{
      font-size:11px; font-weight:800; letter-spacing:.04em;
      padding:.5rem 1.25rem; border-radius:.75rem;
      background:transparent; color:#eab308; border:2px solid #eab308;
      box-shadow: 0 0 0 1px rgba(255,255,255,.06) inset, 0 8px 18px rgba(234,179,8,.25);
    }
    .k-btn-outline-gold:hover{ background: rgba(234,179,8,.08); }

    /* Chat visuals */
    .k-pill{
      background: linear-gradient(90deg,#1f3a8a 0%,#1e40af 45%,#4338ca 75%,#6d28d9 100%);
      box-shadow: 0 10px 28px rgba(67,56,202,.38), inset 0 0 0 1px rgba(255,255,255,.15);
    }
    .k-chat{
      background:#f3e8ff;
      box-shadow: 0 10px 25px rgba(0,0,0,.35), inset 0 0 0 1px rgba(20,20,40,.08);
      display:flex; flex-direction:column;  /* ensure stream is fixed height */
    }

    /* Fixed chat height (edit these two only) */
    :root{ --chat-h: 420px; --chat-h-lg: 480px; }  /* slimmer than before */
    .k-stream{
      height: var(--chat-h);
      overflow-y: auto;
      overscroll-behavior: contain;
    }
    @media (min-width:1024px){ .k-stream{ height: var(--chat-h-lg); } }

    .k-input{ box-shadow: inset 0 1px 0 rgba(0,0,0,.06); }
    .k-send{
      background:#fff;color:#0b1020;border-radius:.75rem;
      box-shadow: 0 4px 10px rgba(0,0,0,.25), inset 0 0 0 1px rgba(0,0,0,.08);
      padding:.5rem 1rem; font-weight:600;
    }

    /* Bubbles */
    .k-bubble-ai{
      background: linear-gradient(135deg,#7c3aed 0%, #a78bfa 55%, #60a5fa 100%);
      color:#fff; border-radius:1.25rem; padding:.85rem 1rem;
      box-shadow: 0 12px 26px rgba(124,58,237,.35), inset 0 0 0 1px rgba(255,255,255,.12);
    }
    .k-bubble-user{
      background:#fff; color:#0b1020; border-radius:1.25rem; padding:.85rem 1rem;
      box-shadow: 0 10px 20px rgba(0,0,0,.18), inset 0 0 0 1px rgba(0,0,0,.06);
    }
    .k-avatar-ai{
  width:28px; height:28px; border-radius:9999px;
  background:
    url("https://katalyst-crm.com/wp-content/uploads/2024/09/K-1.png")
    center / cover no-repeat,
    #1e0647;                         /* fallback color while loading */
  
}

.k-avatar-user{
  width:28px;height:28px;border-radius:9999px;
  display:flex;align-items:center;justify-content:center;
  background:transparent;border:1.5px solid rgba(255,255,255,.9);
  color:#0f0f0f;
}
.k-avatar-user i{ font-size:.9rem; line-height:1; }



/* Optional ‚Äúghost‚Äù style if you want transparent with white border instead */
.k-avatar-user--ghost{
  background:transparent; color:#fff;
  border:1.5px solid rgba(255,255,255,.85);
  box-shadow:none;
}

    .k-chip{ background:#fff; color:#1f2937; border:1px solid rgba(0,0,0,.08); border-radius:.75rem; font-size:12px; padding:.5rem .75rem; }

    /* Header bar */
    .k-head{ background: linear-gradient(180deg,#0b2246 0%, #0b1e3a 100%); }
    .k-logo-frame{
      border-radius:14px; padding:8px 14px; background:rgba(10,17,35,.6);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.12), 0 10px 20px rgba(0,0,0,.35);
    }

      @keyframes kPulseSoft {
    0%, 100% {
      transform: scale(1);
      box-shadow: 0 10px 20px rgba(0,0,0,.25);
    }
    50% {
      transform: scale(1.015); /* tiny lift */
      box-shadow: 0 14px 28px rgba(0,0,0,.28);
    }
  }
  .k-pulse-soft {
    animation: kPulseSoft 2.6s ease-in-out infinite;
  }
  /* Respect reduced motion + pause on hover/focus */
  @media (prefers-reduced-motion: reduce) {
    .k-pulse-soft { animation: none; }
  }
  .k-pulse-soft:hover,
  .k-pulse-soft:focus-visible {
    animation-play-state: paused;
  }
  </style>
</head>
<body class="text-white">
  <!-- Header -->
  <header class="k-head">
  <div class="max-w-7xl mx-auto px-4 py-3 md:py-4">
    <!-- stack on mobile, row on md+ -->
    <div class="flex flex-col md:flex-row md:items-center gap-3 md:gap-6">
      <!-- logo centered on mobile -->
      <div class="k-logo-frame self-center md:self-auto">
        <img
          src="https://katalyst-crm.com/wp-content/uploads/2024/09/katalyst-logo-white.png"
          alt="KATALYST ‚Äî AI Boosted CRM"
          class="h-10 sm:h-12 w-auto"
          loading="eager"
        />
      </div>

      <!-- tagline below logo on mobile, to the right on md+ -->
      <p class="mt-2 md:mt-0 text-center md:text-left
                text-white/95 text-[15px] sm:text-base md:text-lg
                font-semibold leading-snug md:max-w-4xl">
        Because we believe you are your greatest asset, we developed the
        solutions for you to do more with less and buy back your time.
      </p>
    </div>
  </div>
</header>


  <main class="max-w-7xl mx-auto px-4 pb-10">
    <div class="grid grid-cols-1 xl:grid-cols-3 gap-5">
      <!-- LEFT COLUMN -->
      <section class="order-2 xl:order-1 grid sm:grid-cols-2 xl:grid-cols-1 gap-5">
        <!-- Card 1 ‚Äî LEFT -->
        <article class="relative rounded-xl overflow-hidden k-card">
          <img src="https://res.cloudinary.com/dcuswyfur/image/upload/v1758986239/Grup_14_bczbbu.png"
               class="w-full h-[200px] object-cover" alt="">
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>
          <div class="absolute left-4 bottom-2"><button class="k-btn-outline-gold">LEARN MORE</button></div>
        </article>
        <!-- Card 2 ‚Äî LEFT -->
        <article class="relative rounded-xl overflow-hidden k-card">
          <img src="https://res.cloudinary.com/dcuswyfur/image/upload/v1758986265/Grup_15_d7xask.png"
               class="w-full h-[200px] object-cover" alt="">
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>
          <div class="absolute left-4 bottom-2"><button class="k-btn-outline-gold">LEARN MORE</button></div>
        </article>
        <!-- Card 3 ‚Äî RIGHT -->
        <article class="relative rounded-xl overflow-hidden k-card">
          <img src="https://res.cloudinary.com/dcuswyfur/image/upload/v1758986274/Grup_16_gq2fmg.png"
               class="w-full h-[200px] object-cover" alt="">
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>
          <div class="absolute right-4 bottom-2"><button class="k-btn-outline-gold">LEARN MORE</button></div>
        </article>
        <!-- Card 4 ‚Äî LEFT -->
        <article class="relative rounded-xl overflow-hidden k-card">
          <img src="https://res.cloudinary.com/dcuswyfur/image/upload/v1758986279/Grup_17_vssa0a.png"
               class="w-full h-[200px] object-cover" alt="">
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>
          <div class="absolute left-4 bottom-2"><button class="k-btn-outline-gold">LEARN MORE</button></div>
        </article>
      </section>

      <!-- CENTER: sticky chat -->
      <section class="order-1 xl:order-2 relative xl:sticky xl:top-4">
        <div class="text-white text-lg md:text-2xl font-extrabold tracking-wide rounded-2xl px-6 py-3 text-center bg-transparent border border-white/80">
  How can I assist you?
</div>


        <div class="k-chat rounded-3xl mt-3 p-4 md:p-6">
          <div id="chatStream" class="k-stream space-y-3 pr-1">
            <!-- AI greeting -->
            <div class="flex items-start gap-2">
              <div class="k-avatar-ai"></div>
              <div class="k-bubble-ai max-w-[85%]">
                <div class="text-[13px] leading-relaxed">
                  Hey! I‚Äôm <strong>Kaia AI</strong> üëã ‚Äî How can I help today?
                  Ask about pricing, features, or integrations. I can also book a demo.
                </div>
              </div>
            </div>
          </div>

          <!-- Composer -->
          <form id="chatForm" class="mt-3 grid grid-cols-[1fr,100px] gap-3 items-center">
            {% csrf_token %}
            <input id="chatInput" placeholder="Type your message‚Ä¶"
                   class="w-full bg-white text-slate-900 rounded-2xl k-input border border-black/10 px-4 py-3 outline-none"/>
            <button id="sendBtn" type="submit"
  class="k-send w-[100px] h-[46px] flex items-center justify-center gap-2
         text-slate-900 bg-white rounded-2xl border border-black/10
         transition hover:brightness-95 focus:outline-none focus:ring-2 focus:ring-white/60">
  <i id="sendIcon" class="fa-solid fa-paper-plane transition-transform"></i>
  <span class="sr-only">Send</span>
</button>

          </form>

          <!-- Suggested prompts -->
          <div id="suggestions" class="mt-3 grid grid-cols-2 md:grid-cols-4 gap-3"></div>

        </div>

<a href="#"
   class="k-pulse-soft block text-center mt-4 rounded-2xl font-bold py-4
          text-white border border-white/80
          bg-green-700 hover:bg-green-800
          shadow-lg transition
          focus:outline-none focus:ring-2 focus:ring-white/60">
  Click here to book a call with one of our account managers
</a>




      </section>

      <!-- RIGHT COLUMN -->
      <section class="order-3 xl:order-3 grid sm:grid-cols-2 xl:grid-cols-1 gap-5">
        <!-- Card 5 ‚Äî LEFT -->
        <article class="relative rounded-xl overflow-hidden k-card">
          <img src="https://res.cloudinary.com/dcuswyfur/image/upload/v1758986288/Grup_21_n1tdkf.png"
               class="w-full h-[200px] object-cover" alt="">
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>
          <div class="absolute left-4 bottom-2"><button class="k-btn-outline-gold">LEARN MORE</button></div>
        </article>
        <!-- Card 6 ‚Äî RIGHT -->
        <article class="relative rounded-xl overflow-hidden k-card">
          <img src="https://res.cloudinary.com/dcuswyfur/image/upload/v1758986285/Grup_20_z5yyur.png"
               class="w-full h-[200px] object-cover" alt="">
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>
          <div class="absolute right-4 bottom-2"><button class="k-btn-outline-gold">LEARN MORE</button></div>
        </article>
        <!-- Card 7 ‚Äî LEFT -->
        <article class="relative rounded-xl overflow-hidden k-card">
          <img src="https://res.cloudinary.com/dcuswyfur/image/upload/v1758986283/Grup_19_pbkcgt.png"
               class="w-full h-[200px] object-cover" alt="">
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>
          <div class="absolute left-4 bottom-2"><button class="k-btn-outline-gold">LEARN MORE</button></div>
        </article>
        <!-- Card 8 ‚Äî RIGHT -->
        <article class="relative rounded-xl overflow-hidden k-card">
          <img src="https://res.cloudinary.com/dcuswyfur/image/upload/v1758986256/Grup_9_yrjfcr.png"
               class="w-full h-[200px] object-cover" alt="">
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>
          <div class="absolute right-4 bottom-2"><button class="k-btn-outline-gold">LEARN MORE</button></div>
        </article>
      </section>

      
    </div>
  </main>
<script>
  // --- DOM refs
  const stream = document.getElementById("chatStream");
  const form   = document.getElementById("chatForm");
  const input  = document.getElementById("chatInput");
  const sendBtn  = document.getElementById("sendBtn");   // optional (if you added the FA plane button)
  const sendIcon = document.getElementById("sendIcon");  // optional (if you added the FA plane button)

  // --- utils
  function escapeHtml(s){
    return s.replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
  }
  function addBubble(text, role="ai"){
    const row = document.createElement("div");
    row.className = "flex items-start gap-2 " + (role === "user" ? "justify-end" : "");
    row.innerHTML = (role === "user")
      ? `<div class="k-bubble-user max-w-[85%]">${escapeHtml(text)}</div><div class="k-avatar-user"><i class="fa-solid fa-user"></i></div>`
      : `<div class="k-avatar-ai"></div>
       <div class="k-bubble-ai max-w-[85%]">${escapeHtml(text)}</div>`;
    stream.appendChild(row);
    stream.scrollTop = stream.scrollHeight;

    if (sendIcon) {
  sendIcon.classList.add("[transform:translateX(2px)]");
  setTimeout(() => sendIcon.classList.remove("[transform:translateX(2px)]"), 160);
}

  }
  function getCookie(name){
    const v = `; ${document.cookie}`.split(`; ${name}=`);
    if (v.length === 2) return v.pop().split(";").shift();
  }

  // --- sending state (works even if you didn't add the FA button/ids)
  function setSending(on){
    if (!sendBtn || !sendIcon) return; // noop if not present
    sendBtn.disabled = on;
    sendBtn.classList.toggle("opacity-70", on);
    sendBtn.classList.toggle("cursor-not-allowed", on);
    if (on){
      sendIcon.classList.remove("fa-paper-plane");
      sendIcon.classList.add("fa-spinner","fa-spin");
    } else {
      sendIcon.classList.remove("fa-spinner","fa-spin");
      sendIcon.classList.add("fa-paper-plane");
    }
  }

  // --- submit handler
  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    const text = (input.value || "").trim();
    if (!text) return;

    addBubble(text, "user");
    input.value = "";
    setSending(true);

    try {
      const fd = new FormData();
      fd.append("message", text);
      const res = await fetch("{% url 'chatbot_api' %}", {
        method: "POST",
        body: fd,
        headers: { "X-CSRFToken": getCookie("csrftoken") }
      });

      let data = {};
      try { data = await res.json(); } catch(_){}
      const reply = (data && data.reply) ? String(data.reply) : "I‚Äôm here to help.";
      addBubble(reply);
    } catch {
      addBubble("Network hiccup‚Äîplease try again.");
    } finally {
      setSending(false);
    }
  });

  // --- static chips (if you kept any in the HTML)
  document.querySelectorAll("[data-suggest]").forEach(btn => {
    btn.addEventListener("click", () => {
      input.value = btn.getAttribute("data-suggest");
      form.requestSubmit();
    });
  });

  // --- dynamic suggestions (from backend library)
  async function loadSuggestions(){
    const wrap = document.getElementById("suggestions");
    if (!wrap) return;

    try{
      const res  = await fetch("{% url 'chat_suggestions_api' %}", { method: "GET" });
      const data = await res.json();
      const items = Array.isArray(data?.suggestions) ? data.suggestions : [];

      wrap.innerHTML = "";
      items.forEach((it) => {
        const label = (it.label || it.text || "").trim() || "Ask";
        const text  = (it.text  || it.label || label);
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "k-chip";
        btn.textContent = label;
        btn.setAttribute("data-suggest", text);
        btn.addEventListener("click", () => {
          input.value = text;
          form.requestSubmit();
        });
        wrap.appendChild(btn);
      });

      // Fallback
      if (wrap.children.length === 0) {
        ["Pricing", "Features", "Integrations", "Book a demo"].forEach(t=>{
          const btn = document.createElement("button");
          btn.type="button"; btn.className="k-chip"; btn.textContent=t;
          btn.setAttribute("data-suggest", t);
          btn.addEventListener("click", () => { input.value = t; form.requestSubmit(); });
          wrap.appendChild(btn);
        });
      }
    }catch(e){
      console.warn("Suggestions load failed:", e);
    }
  }

  // Kick it off after DOM is ready
  if (document.readyState === "loading"){
    document.addEventListener("DOMContentLoaded", loadSuggestions);
  } else {
    loadSuggestions();
  }
</script>

</body>
</html>
